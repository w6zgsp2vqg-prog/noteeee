<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NEINEI — Edit Note</title>
<style>
:root {
  --bg:#050507;
  --neon:#00d4ff;
  --neon-2:#0077ff;
  --panel:#0b0b0d;
  --muted:#9aa3aa;
}
* { box-sizing: border-box; }
html, body { margin:0; padding:0; font-family: Inter, monospace; background: var(--bg); color: var(--neon); height:100%; display:flex; flex-direction: column; }

.topbar { display:flex; justify-content:space-between; align-items:center; padding:10px 20px; border-bottom:1px solid rgba(0,212,255,0.2);}
.topbar .title { font-size:18px; font-weight:bold; flex:1; text-align:center; }

.content { flex:1; padding:20px; display:flex; flex-direction: column; gap:12px; }
.content input[type="text"] { padding:8px 12px; border-radius:6px; border:1px solid rgba(0,212,255,0.3); background: transparent; color: var(--neon); font-size:16px; outline:none; }
.content textarea { padding:8px 12px; border-radius:6px; border:1px solid rgba(0,212,255,0.3); background: transparent; color: var(--neon); font-size:14px; outline:none; resize:none; flex:1; }

.bottombar { display:flex; justify-content: flex-end; padding:10px 20px; border-top:1px solid rgba(0,212,255,0.2);}
.bottombar .btn { margin-left:10px; }

.btn { padding:8px 16px; border-radius:8px; border:1px solid var(--neon); background: transparent; color: var(--neon); cursor:pointer; font-weight:600;}
.btn.primary { background: linear-gradient(90deg, var(--neon), var(--neon-2)); color:#001; box-shadow:0 4px 12px rgba(0,212,255,0.12);}
</style>
</head>
<body>

<div class="topbar">
  <div class="title">Edit Note</div>
</div>

<div class="content">
  <input type="text" id="noteTitle" placeholder="제목을 입력하세요">
  <textarea id="noteContent" placeholder="내용을 입력하세요" rows="15"></textarea>
</div>

<div class="bottombar">
  <button class="btn" id="backBtn">main</button>
  <button class="btn primary" id="editBtn">edit</button>
</div>

<script>
// URL에서 수정할 글 index
function getQueryIndex() {
  const params = new URLSearchParams(window.location.search);
  return parseInt(params.get('idx'));
}

// 기존 글 불러오기
function loadNote(){
  const idx = getQueryIndex();
  const savedNotes = JSON.parse(localStorage.getItem('notes')) || [];
  if(!savedNotes[idx]) return;
  document.getElementById('noteTitle').value = savedNotes[idx].title;
  document.getElementById('noteContent').value = savedNotes[idx].content;
}

loadNote();

// 나가기 버튼
document.getElementById('backBtn').addEventListener('click', ()=>{ window.location.href = 'note.html'; });

// 수정 버튼
document.getElementById('editBtn').addEventListener('click', ()=>{
  const idx = getQueryIndex();
  const savedNotes = JSON.parse(localStorage.getItem('notes')) || [];
  if(!savedNotes[idx]) return;

  const title = document.getElementById('noteTitle').value.trim();
  const content = document.getElementById('noteContent').value.trim();
  if(!title || !content){ alert('제목과 내용을 모두 입력해주세요.'); return; }

  // 수정 시간
  const now = new Date();
  const date = `${now.getFullYear()}.${String(now.getMonth()+1).padStart(2,'0')}.${String(now.getDate()).padStart(2,'0')} - 수정됨`;

  // 덮어쓰기
  savedNotes[idx] = { title, content, date };
  localStorage.setItem('notes', JSON.stringify(savedNotes));

  window.location.href = 'note.html';
});
</script>
</body>
</html>
